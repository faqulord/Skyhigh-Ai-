<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skyhigh AI | Vez√©rl≈ëpult</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&family=Orbitron:wght@900&display=swap');
        body { background-color: #050505; color: white; font-family: 'Inter', sans-serif; }
        .font-robot { font-family: 'Orbitron', sans-serif; }
        
        /* K√°rty√°k */
        .card { 
            background: #0a0a0a; 
            border: 1px solid #1a1a1a; 
            border-radius: 16px; 
            padding: 24px;
            position: relative;
            overflow: hidden;
            transition: 0.3s;
        }
        
        /* PROFI N√âZET: Neon Keret */
        .card-active { border: 1px solid #22c55e; box-shadow: 0 0 20px rgba(34, 197, 94, 0.1); }

        /* INGYENES N√âZET: Scanner Cs√≠k */
        .scanner-line {
            position: absolute; top: 0; left: 0; width: 100%; height: 2px;
            background: #22c55e;
            box-shadow: 0 0 10px #22c55e;
            animation: scan 3s infinite linear;
            opacity: 0.5;
        }
        @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }

        /* Hom√°lyos√≠t√°s a titkokhoz */
        .blur-secret { 
            filter: blur(5px); user-select: none; background: #111; color: transparent; 
            text-shadow: 0 0 8px rgba(255,255,255,0.5);
        }

        /* Gombok */
        .btn-unlock { 
            background: linear-gradient(90deg, #22c55e, #16a34a); color: black; 
            font-weight: 900; text-transform: uppercase; letter-spacing: 1px; font-size: 11px;
            padding: 14px; border-radius: 10px; width: 100%; display: block; text-align: center;
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.3);
            animation: pulse-green 2s infinite;
        }
        @keyframes pulse-green { 0% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); } 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); } }

        .btn-admin { background: gold; color: black; font-weight: 900; padding: 10px; border-radius: 8px; text-align: center; display: block; margin-bottom: 20px; text-transform: uppercase; font-size: 10px; }

        /* Chat */
        .chat-bubble { background: #111; border: 1px solid #222; padding: 12px; border-radius: 12px; font-size: 12px; color: #ccc; margin-bottom: 8px; }
        .ai-label { color: #a855f7; font-weight: 900; font-size: 9px; text-transform: uppercase; display: block; margin-bottom: 2px; }
    </style>
</head>
<body class="p-4 md:p-6 max-w-6xl mx-auto pb-24">

    <header class="flex justify-between items-center mb-8 border-b border-zinc-900 pb-4">
        <div>
            <h1 class="text-lg font-black uppercase tracking-tight text-white"><%= user.fullname %></h1>
            <div class="flex items-center gap-2">
                <span class="w-2 h-2 rounded-full <%= user.hasLicense ? 'bg-green-500 animate-pulse' : 'bg-red-500' %>"></span>
                <p class="text-[10px] text-zinc-500 uppercase font-bold tracking-widest">
                    <%= user.hasLicense ? 'AKT√çV PARTNER' : 'NINCS LICENC' %>
                </p>
            </div>
        </div>
        <a href="/logout" class="text-[10px] font-bold text-zinc-600 hover:text-white uppercase border border-zinc-800 px-3 py-1 rounded">Kil√©p√©s</a>
    </header>

    <% if (isAdmin) { %> <a href="/admin" class="btn-admin">üëë Igazgat√≥i Vez√©rl≈ëpult</a> <% } %>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

        <div class="space-y-6">
            
            <% if (user.hasLicense) { %>
                <div class="card card-active bg-green-900/5">
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="text-[10px] font-black uppercase text-green-500 tracking-widest">Mai Profit</h3>
                        <i class="fas fa-chart-line text-green-500"></i>
                    </div>
                    <div class="flex items-baseline gap-2">
                        <span class="text-4xl font-robot font-black text-white">+4.8%</span>
                        <span class="text-xs text-green-500 font-bold uppercase">N√∂veked√©s</span>
                    </div>
                    <p class="text-[10px] text-zinc-500 mt-2">A t≈ëk√©d biztons√°gban van.</p>
                </div>

                <div class="card">
                    <h3 class="text-[10px] font-black uppercase text-zinc-500 tracking-widest mb-4">Akt√≠v Ciklus (30 Nap)</h3>
                    
                    <div class="flex justify-between text-xs font-bold uppercase mb-2">
                        <span class="text-white">Jelenlegi nap:</span>
                        <span class="text-green-500">1. / 30.</span>
                    </div>
                    <div class="w-full bg-zinc-800 h-3 rounded-full overflow-hidden mb-4 border border-zinc-700">
                        <div class="bg-gradient-to-r from-green-600 to-green-400 h-full w-[3.3%] shadow-[0_0_15px_rgba(34,197,94,0.5)]"></div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4 text-center mt-4 border-t border-zinc-800 pt-4">
                        <div>
                            <p class="text-[9px] text-zinc-500 uppercase">H√°tral√©v≈ë</p>
                            <p class="text-lg font-black text-white">29 Nap</p>
                        </div>
                        <div>
                            <p class="text-[9px] text-zinc-500 uppercase">C√©l Profit</p>
                            <p class="text-lg font-black text-white">180%</p>
                        </div>
                    </div>
                </div>

                <div class="card border border-zinc-800">
                    <div class="flex items-center gap-2 mb-4">
                        <span class="w-2 h-2 bg-red-500 rounded-full animate-pulse"></span>
                        <h3 class="text-xs font-black uppercase text-white">Mai Master Tipp</h3>
                    </div>
                    <div class="bg-zinc-900 p-4 rounded-xl text-center">
                        <p class="text-xl font-black text-white mb-1">MAN. CITY <span class="text-zinc-600">vs</span> LIVERPOOL</p>
                        <div class="inline-block bg-green-500 text-black font-black text-xs px-3 py-1 rounded uppercase mt-2">
                            Tipp: Hazai (1.85)
                        </div>
                    </div>
                </div>

            <% } else { %>
                
                <div class="card border-green-500/20">
                    <div class="scanner-line"></div>
                    
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xs font-black uppercase text-green-500 tracking-widest"><i class="fas fa-satellite-dish mr-1 animate-pulse"></i> Keres√©s...</h3>
                        <span class="text-[9px] font-bold bg-green-900/30 text-green-400 px-2 py-1 rounded">√âL≈ê</span>
                    </div>

                    <div class="space-y-4">
                        <div>
                            <div class="flex justify-between text-[10px] text-zinc-400 uppercase font-bold mb-1">
                                <span>Matematikai Es√©ly</span>
                                <span class="text-white">94.2%</span>
                            </div>
                            <div class="w-full bg-zinc-800 h-1.5 rounded-full overflow-hidden">
                                <div class="bg-green-500 h-full w-[94%]"></div>
                            </div>
                        </div>

                        <div class="bg-zinc-900 p-4 rounded-xl border border-zinc-800 text-center relative overflow-hidden">
                            <div class="absolute inset-0 flex items-center justify-center z-10 bg-black/20">
                                <i class="fas fa-lock text-white/40 text-3xl"></i>
                            </div>
                            <p class="text-xl font-black blur-secret">TITKOS CSAPATOK</p>
                            <p class="text-xs blur-secret mt-2">Tipp: Hazai (1.85)</p>
                        </div>
                    </div>

                    <div class="mt-6">
                        <p class="text-[10px] text-zinc-500 text-center mb-3">A profit kijelz≈ë √©s a tipp z√°rolva van.</p>
                        <a href="/fizetes" class="btn-unlock">
                            TIPP FELOLD√ÅSA (AKTIV√ÅL√ÅS) <i class="fas fa-arrow-right ml-1"></i>
                        </a>
                    </div>
                </div>

                <div class="card opacity-50">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-history text-zinc-500"></i>
                        <div>
                            <p class="text-[10px] text-zinc-400 uppercase font-bold">Tegnapi statisztika</p>
                            <p class="text-xs font-bold text-white">NYERTES NAP (+4.5%) ‚úÖ</p>
                        </div>
                    </div>
                </div>

            <% } %>

        </div>

        <div class="lg:col-span-2 space-y-6">
            <div class="card h-[500px] flex flex-col border border-purple-500/20">
                <div class="flex items-center gap-3 border-b border-zinc-800 pb-3 mb-2">
                    <div class="relative">
                        <div class="w-10 h-10 rounded-full bg-zinc-900 border border-purple-600 flex items-center justify-center">
                            <i class="fas fa-robot text-purple-500"></i>
                        </div>
                        <div class="absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 border-2 border-black rounded-full animate-pulse"></div>
                    </div>
                    <div>
                        <h3 class="text-sm font-bold text-white">Skyhigh AI Asszisztens</h3>
                        <p class="text-[9px] text-purple-400 font-bold uppercase">Profi Sportfogad√≥ Robot</p>
                    </div>
                </div>

                <div id="chatBox" class="flex-1 overflow-y-auto pr-2"></div>

                <div class="mt-2 relative">
                    <input type="text" placeholder="K√©rdezz a strat√©gi√°r√≥l..." class="w-full bg-zinc-900 border border-zinc-800 rounded-lg px-4 py-3 text-xs text-white focus:border-purple-500 outline-none">
                </div>
            </div>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const chatBox = document.getElementById('chatBox');
            const hasLicense = <%= user.hasLicense %>;
            const userName = "<%= user.fullname %>";
            
            // K√ºl√∂nb√∂z≈ë √ºzenetek Akt√≠v vs Inakt√≠v tagnak
            let messages = [];

            if (hasLicense) {
                // √úzenetek AKT√çV tagnak
                messages = [
                    { text: `√údv √∫jra, ${userName}!`, delay: 500 },
                    { text: "A rendszered <strong>AKT√çV</strong>. A 30 napos ciklus elindult.", delay: 1500 },
                    { text: "Mai profit c√©l: <span class='text-green-500 font-bold'>+4.8%</span>. A tippet bal oldalon l√°thatod.", delay: 3000 },
                    { text: "Tedd meg a fogad√°st pontosan a megadott t√©ttel, majd d≈ëlj h√°tra.", delay: 5000 }
                ];
            } else {
                // √úzenetek INGYENES tagnak
                messages = [
                    { text: `√údv√∂z√∂llek, ${userName}. √ân a Skyhigh AI vagyok.`, delay: 500 },
                    { text: "A mai piaci elemz√©s elk√©sz√ºlt. <strong>94%-os tal√°lati es√©lyt</strong> m√©rtem.", delay: 2000 },
                    { text: "Jelenleg nem l√°tod a profit sz√°ml√°l√≥t √©s a tippet, mert a licenced inakt√≠v.", delay: 4000 },
                    { text: "A vagyon√©p√≠t√©shez aktiv√°ld a rendszert a bal oldali gombbal.", delay: 6000 }
                ];
            }

            function addMessage(msg) {
                const div = document.createElement('div');
                div.className = 'chat-bubble opacity-0 transition duration-500';
                div.innerHTML = `<span class="ai-label">Skyhigh AI</span>${msg.text}`;
                chatBox.appendChild(div);
                setTimeout(() => div.classList.remove('opacity-0'), 100);
                chatBox.scrollTop = chatBox.scrollHeight;
            }

            messages.forEach(m => setTimeout(() => addMessage(m), m.delay));
        });
    </script>
</body>
</html>